<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI-Powered Predictive Maintenance Platform for industrial equipment monitoring">
    <title>AI-Powered Predictive Maintenance Platform</title>
    <link rel="stylesheet" href="styles/app.css">
</head>
<body>
    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>🔧 AI-Powered Predictive Maintenance</h1>
            <p>Real-time equipment monitoring and failure prediction</p>
            <div id="healthStatus" class="status-indicator" role="status" aria-live="polite">
                🟢 Checking system status...
            </div>
        </header>

        <!-- Main Content -->
        <main id="mainContent">
            <!-- Quick Actions Dashboard -->
            <section class="dashboard" aria-label="Quick Actions">
                <!-- Health Check Card -->
                <article class="card">
                    <h3>🏥 System Health</h3>
                    <p>Monitor API connectivity and system status</p>
                    <button type="button" class="btn btn-primary btn-full" id="manualHealthCheck">
                        Check Health
                    </button>
                </article>

                <!-- Upload Data Card -->
                <article class="card">
                    <h3>📤 Upload Sensor Data</h3>
                    <form id="uploadForm" aria-label="Upload sensor data form">
                        <div class="form-group">
                            <label for="sensorFile">
                                CSV File
                                <span class="sr-only">(Columns: timestamp, machine_id, sensor, value)</span>
                            </label>
                            <input 
                                type="file" 
                                id="sensorFile" 
                                name="file" 
                                accept=".csv,text/csv,application/csv" 
                                required
                                aria-required="true"
                            >
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">
                            Upload Data
                        </button>
                    </form>
                    <button type="button" class="btn btn-secondary btn-full mt-3" id="generateSampleBtn">
                        📥 Generate Sample Data
                    </button>
                    <div id="uploadLoading" class="loading" role="status" aria-live="polite"></div>
                    <div id="uploadStatus" class="status" role="alert" aria-live="assertive"></div>
                </article>

                <!-- Quick Prediction Card -->
                <article class="card">
                    <h3>⚡ Quick Prediction</h3>
                    <p>Get instant failure prediction for a machine</p>
                    <div class="form-group">
                        <label for="quickMachineId">Machine ID</label>
                        <input 
                            type="text" 
                            id="quickMachineId" 
                            placeholder="e.g., M-001"
                        >
                    </div>
                    <button type="button" class="btn btn-success btn-full" id="quickPredictBtn">
                        Predict Now
                    </button>
                </article>
            </section>

            <!-- Tabbed Interface -->
            <section class="tabs" aria-label="Main features">
                <!-- Tab List -->
                <div role="tablist" aria-label="Feature tabs">
                    <button 
                        role="tab" 
                        aria-selected="true" 
                        aria-controls="panel-predictions" 
                        id="tab-predictions"
                        tabindex="0"
                        class="tab-button"
                    >
                        🔮 Predictions
                    </button>
                    <button 
                        role="tab" 
                        aria-selected="false" 
                        aria-controls="panel-anomaly" 
                        id="tab-anomaly"
                        tabindex="-1"
                        class="tab-button"
                    >
                        🔍 Anomaly Detection
                    </button>
                    <button 
                        role="tab" 
                        aria-selected="false" 
                        aria-controls="panel-chat" 
                        id="tab-chat"
                        tabindex="-1"
                        class="tab-button"
                    >
                        💬 AI Chat
                    </button>
                    <button 
                        role="tab" 
                        aria-selected="false" 
                        aria-controls="panel-alerts" 
                        id="tab-alerts"
                        tabindex="-1"
                        class="tab-button"
                    >
                        🔔 Alerts
                    </button>
                </div>

                <!-- Tab Panel: Predictions -->
                <div 
                    role="tabpanel" 
                    id="panel-predictions" 
                    aria-labelledby="tab-predictions"
                    aria-hidden="false"
                    class="tab-panel"
                >
                    <h2 class="sr-only">Failure Predictions</h2>
                    <form id="predictionForm" aria-label="Prediction analysis form">
                        <div class="form-group">
                            <label for="predictionMachineId">Machine ID</label>
                            <input 
                                type="text" 
                                id="predictionMachineId" 
                                placeholder="e.g., M-001" 
                                required
                                aria-required="true"
                                aria-describedby="prediction-help"
                            >
                            <small id="prediction-help" class="text-muted">
                                Enter the machine ID to analyze failure risk across multiple time horizons
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            🔮 Get Prediction
                        </button>
                    </form>
                    
                    <div id="predictionLoading" class="loading" role="status" aria-live="polite"></div>
                    <div id="predictionStatus" class="status" role="status" aria-live="polite"></div>
                    <div id="predictionResult" aria-live="polite" aria-atomic="true"></div>
                </div>

                <!-- Tab Panel: Anomaly Detection -->
                <div 
                    role="tabpanel" 
                    id="panel-anomaly" 
                    aria-labelledby="tab-anomaly"
                    aria-hidden="true"
                    class="tab-panel"
                >
                    <h2 class="sr-only">Anomaly Detection</h2>
                    <form id="anomalyForm" aria-label="Anomaly detection form">
                        <div class="form-group">
                            <label for="anomalyMachineId">Machine ID</label>
                            <input 
                                type="text" 
                                id="anomalyMachineId" 
                                placeholder="e.g., M-001" 
                                required
                                aria-required="true"
                                aria-describedby="anomaly-help"
                            >
                            <small id="anomaly-help" class="text-muted">
                                Detect unusual patterns in sensor readings that may indicate equipment issues
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            🔍 Detect Anomaly
                        </button>
                    </form>
                    
                    <div id="anomalyLoading" class="loading" role="status" aria-live="polite"></div>
                    <div id="anomalyStatus" class="status" role="status" aria-live="polite"></div>
                    <div id="anomalyResult" aria-live="polite" aria-atomic="true"></div>
                </div>

                <!-- Tab Panel: AI Chat -->
                <div 
                    role="tabpanel" 
                    id="panel-chat" 
                    aria-labelledby="tab-chat"
                    aria-hidden="true"
                    class="tab-panel"
                >
                    <h2 class="sr-only">AI Maintenance Assistant</h2>
                    <p>Ask questions about equipment maintenance, troubleshooting, and best practices.</p>
                    
                    <form id="chatForm" aria-label="AI chat form">
                        <div class="form-group">
                            <label for="chatQuestion">Your Question</label>
                            <textarea 
                                id="chatQuestion" 
                                rows="4"
                                placeholder="e.g., What are the signs of bearing failure?"
                                required
                                aria-required="true"
                                aria-describedby="chat-help"
                            ></textarea>
                            <small id="chat-help" class="text-muted">
                                Ask about maintenance procedures, failure symptoms, or troubleshooting steps
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            💬 Ask Question
                        </button>
                    </form>
                    
                    <div id="chatLoading" class="loading" role="status" aria-live="polite"></div>
                    <div id="chatStatus" class="status" role="status" aria-live="polite"></div>
                    <div id="chatResult" aria-live="polite" aria-atomic="true"></div>
                </div>

                <!-- Tab Panel: Alerts -->
                <div 
                    role="tabpanel" 
                    id="panel-alerts" 
                    aria-labelledby="tab-alerts"
                    aria-hidden="true"
                    class="tab-panel"
                >
                    <h2 class="sr-only">Active Alerts</h2>
                    <p>View recent alerts and critical warnings for all machines.</p>
                    
                    <button type="button" class="btn btn-primary" id="getAlertsBtn">
                        🔔 Load Alerts
                    </button>
                    
                    <div id="alertsLoading" class="loading" role="status" aria-live="polite"></div>
                    <div id="alertsStatus" class="status" role="status" aria-live="polite"></div>
                    <div id="alertsResult" aria-live="polite" aria-atomic="true"></div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-5" style="color: white; opacity: 0.8; padding: 20px 0;">
            <p>&copy; 2025 AI-Powered Predictive Maintenance Platform | Built with FastAPI & Vanilla JS</p>
        </footer>
    </div>

    <!-- Load JavaScript (deferred for performance) -->
    <script src="scripts/app.js" defer></script>
</body>
</html>
